<!-- src/app/components/resultados/resultados.html -->
<div class="container resultados-container">
  <h2 class="titulo">ğŸ† Resultados Globales</h2>

  <div *ngIf="loading()">Cargando resultados...</div>

  <div *ngIf="!loading()">
    <!-- Selector de juegos -->
    <div class="filtro-juegos">
      <label for="juego-selector">Filtrar por juego:</label>
      <select id="juego-selector" [(ngModel)]="juegoSeleccionado" (change)="filtrarResultados()">
        <option value="todos">Todos los Juegos</option>
        <option value="ahorcado">Ahorcado</option>
        <option value="mayorMenor">Mayor o Menor</option>
        <option value="preguntados">Preguntados</option>
        <option value="adivinaBandera">Adivina la Bandera</option>
      </select>
    </div>

    <!-- Ahorcado -->
    <div class="tabla-juego" *ngIf="mostrarJuego('ahorcado')">
      <h3>ğŸª“ Ahorcado</h3>
      <table>
        <thead>
          <tr>
            <th>Jugador</th>
            <th>Palabra</th>
            <th>Â¿GanÃ³?</th>
            <th>Tiempo (s)</th>
            <th>Intentos</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of ahorcado()">
            <td>{{ r.username }}</td>
            <td>{{ r.word }}</td>
            <td>{{ r.won ? 'âœ…' : 'âŒ' }}</td>
            <td>{{ (r.time_ms / 1000) | number:'1.0-1' }}</td>
            <td>{{ r.guesses }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Mayor o Menor -->
    <div class="tabla-juego" *ngIf="mostrarJuego('mayorMenor')">
      <h3>ğŸ”¼ğŸ”½ Mayor o Menor</h3>
      <table>
        <thead>
          <tr>
            <th>Jugador</th>
            <th>Aciertos</th>
            <th>Rondas</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of mayorMenor()">
            <td>{{ r.username }}</td>
            <td>{{ r.correct_count }}</td>
            <td>{{ r.total_rounds }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Preguntados -->
    <div class="tabla-juego" *ngIf="mostrarJuego('preguntados')">
      <h3>â“ Preguntados</h3>
      <table>
        <thead>
          <tr>
            <th>Jugador</th>
            <th>Tema</th>
            <th>Aciertos</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of preguntados()">
            <td>{{ r.username }}</td>
            <td>{{ r.topic }}</td>
            <td>{{ r.correct_answers }}</td>
            <td>{{ r.total_questions }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- --- NUEVO: Adivina la Bandera --- -->
    <div class="tabla-juego" *ngIf="mostrarJuego('adivinaBandera')">
      <h3>ğŸ—ºï¸ Adivina la Bandera</h3>
      <table>
        <thead>
          <tr>
            <th>Jugador</th>
            <th>PuntuaciÃ³n</th>
            <th>Banderas Adivinadas</th>
            <th>Intentos Totales</th>
            <th>Tiempo (s)</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of adivinaBandera()">
            <td>{{ r.username }}</td>
            <td>{{ r.score }}</td>
            <td>{{ r.flags_guessed }}</td>
            <td>{{ r.total_attempts }}</td>
            <td>{{ (r.time_taken_ms / 1000) | number:'1.0-1' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>